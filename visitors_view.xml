<?xml version="1.0" encoding="UTF-8"?>
<openerp>
	<data>



		<!-- Tree view for the Visitor datewise class-->
		<record model='ir.ui.view' id='visitor_datewise_tree'>
			<field name="name">visitor.datewise.tree</field>
			<field name="model">visitor.datewise</field>
			<field name="arch" type="xml">
				<tree string="datewises" create="false" delete="false"  >
					<field name="date" />
					<field name="stay" />
					<field name="states" />
					<field name="registrationid" />
					<field name="abhyasi_count" />
					<field name="children_count" />
					<field name="guest_count" />
					<field name="abhyasis" />
					<field name="children" />
					<field name="roomid" />
				</tree>
			</field>
		</record>
		<record model='ir.ui.view' id='visitor_datewise_kanban'>
			<field name="name">visitor.datewise.kanban</field>
			<field name="model">visitor.datewise</field>
			<field name="arch" type="xml">
                            <kanban>
				    <field name="guest_count" sum="1" />
                    <templates>
                        <t t-name="kanban-box">
                            <div class="oe_kanban_vignette oe_semantic_html_override">
                                <a type="open" href="#" class="oe_kanban_action">
                                </a>
                                <div class="text-center">
				    <field name="date" />
                                    <h1 class="oe_partner_heading">
                                        <a type="open">
				    <field name="guest_count" />
                                        </a>
                                    </h1>
                                            <field name="abhyasis"/>
                                            <field name="children"/>
                                </div>
                            </div>
                        </t>
                    </templates>
			    </kanban>
			</field>
		</record>
		<record model='ir.ui.view' id='visitor_datewise_search'>
			<field name="name">visitor.datewise.search</field>
			<field name="model">visitor.datewise</field>
			<field name="arch" type="xml">
				<search string="Datewise" >
					<field name="date" />
					<field name="stay" />
					<field name="states" />
					<field name="registrationid" />

                                        <filter name="filter_cancelled" domain="[('states', '!=', 'cancelled')]" string="Not Cancelled"/>
                                        <filter name="filter_today" string="Today" domain="[('date','&lt;=',time.strftime('%Y-%m-%d 23:59:59')),('date','&gt;=',time.strftime('%Y-%m-%d 00:00:00'))]"/>

                                        <group expand="1" string="Group By">
                                            <filter name="groupby_date" context="{'group_by': 'date:day'}" string="Date" />
                                            <filter name="groupby_roomid" context="{'group_by': 'roomid'}" string="Room" />
                                            <filter name="groupby_states" context="{'group_by': 'states'}" string="State" />
                                        </group>
				</search>
			</field>
		</record>
		<!-- Action for the datewise class-->
		<record model='ir.actions.act_window' id='visitor_datewise_act'>
			<field name="name">datewise</field>
			<field name="res_model">visitor.datewise</field>
			<field name="view_type">form</field>
                        <field name="view_mode">tree</field>
                        <field name="view_id" ref="visitor_datewise_tree"></field>
                        <field name="context">{"search_default_groupby_date" : True, "search_default_groupby_roomid":True, "search_default_filter_cancelled": True}</field>
			<field name="help" type="html">
			<p>
			</p>
			</field>
		</record>
		<record model='ir.ui.view' id='visitor_datewise_roomwise_tree'>
			<field name="name">visitor.datewise.roomwise.tree</field>
			<field name="model">visitor.datewise</field>
			<field name="arch" type="xml">
				<tree string="datewises" create="false" delete="false"  >
					<field name="date" />
					<field name="stay" />
					<field name="states" />
					<field name="registrationid" />
					<field name="abhyasi_count" />
					<field name="children_count" />
					<field name="guest_count" />
					<field name="abhyasis" />
					<field name="children" />
					<field name="roomid" />
				</tree>
			</field>
		</record>
		<record model='ir.actions.act_window' id='visitor_datewise_roomwise_act'>
			<field name="name">datewise.roomwise</field>
			<field name="res_model">visitor.datewise</field>
			<field name="view_type">form</field>
                        <field name="view_mode">tree</field>
                        <field name="view_id" ref="visitor_datewise_roomwise_tree"></field>
                        <field name="context">{"search_default_groupby_roomid":True, "search_default_filter_today":True }</field>
			<field name="help" type="html">
			<p>
			</p>
			</field>
		</record>
		<record model='ir.ui.view' id='visitor_datewise_kitchen_tree'>
			<field name="name">visitor.datewise.kitchen.tree</field>
			<field name="model">visitor.datewise</field>
			<field name="arch" type="xml">
				<tree string="datewises" create="false" delete="false"  >
					<field name="date" />
					<field name="breakfast" />
					<field name="lunch" />
					<field name="dinner" />
					<field name="states" />
				</tree>
			</field>
		</record>
		<record model='ir.actions.act_window' id='visitor_datewise_kitchen_act'>
			<field name="name">datewise.kitchen</field>
			<field name="res_model">visitor.datewise</field>
			<field name="view_type">form</field>
                        <field name="view_mode">tree</field>
                        <field name="view_id" ref="visitor_datewise_kitchen_tree"></field>
                        <field name="context">{"search_default_groupby_date":True, "search_default_filter_cancelled": True }</field>
			<field name="help" type="html">
			<p>
			</p>
			</field>
		</record>

		<!-- Tree view for the Visitor Abhyasi class-->
		<record model='ir.ui.view' id='visitor_abhyasi_tree'>
			<field name="name">visitor.abhyasi.editable.list</field>
			<field name="model">visitor.abhyasi</field>
			<field name="arch" type="xml">
				<tree string="Abhyasis" editable="bottom">
					<field name="abhyasi_id" />
					<field name="full_name" />
					<field name="gender" />
					<field name="age" />
					<field name="contactnumber" />
					<field name="center" />
					<field name="country" />
					<field name="overseas" />
					<field name="preceptor" />
				</tree>
			</field>
		</record>
        <!-- Form view for the Visitor Abhyasi class-->
		<record model='ir.ui.view' id='visitor_abhyasi_form'>
			<field name="name">visitor.abhyasi.form</field>
			<field name="model">visitor.abhyasi</field>
			<field name="arch" type="xml">
				<form string="Abhyasi Visitor Form">
					<sheet>
						<group col="2" string="Abhyasi Details">
							<group>
								<field name="abhyasi_id" />
								<field name="full_name" />
								<field name="gender" />
								<field name="birthyear" />
								<field name="contactnumber" />
							</group>
							<group>
								<field name="preceptor" />
								<field name="center" />
								<field name="country" />
								<field name="overseas" />
								<field name="age" />
							</group>
						</group>
					</sheet>
				</form>
			</field>
		</record>
		<!-- Action for the Abhyasi class-->
		<record model='ir.actions.act_window' id='visitor_abhyasi_act'>
			<field name="name">Abhyasi</field>
			<field name="res_model">visitor.abhyasi</field>
			<field name="view_type">tree</field>
			<field name="view_mode">tree,form</field>
			<field name="help" type="html">
			<p class="oe_view_nocontent_create">
				Click to create a new visitor abhyasi form
			</p><p>
			</p>
			</field>
		</record>


		<!-- Tree view for the Non Abhyasi class-->
		<record model='ir.ui.view' id='visitor_nonabhyasi_tree'>
			<field name="name">visitor.nonabhyasi.tree</field>
			<field name="model">visitor.nonabhyasi</field>
			<field name="arch" type="xml">
				<tree string="Roles" editable="bottom">
					<field name="full_name" />
					<field name="gender" />
					<field name="age" />
					<field name="child" />
				</tree>
			</field>
		</record>
		<!-- Form view for the Non Abhyasi class-->
		<record model='ir.ui.view' id='visitor_nonabhyasi_form'>
			<field name="name">visitor.nonabhyasi.form</field>
			<field name="model">visitor.nonabhyasi</field>
			<field name="arch" type="xml">
				<form string="Children and Other Guests">
					<sheet>
						<group col="2" string="Non Abhyasi Details">
							<group>
								<field name="full_name" />
								<field name="birthyear" />
								<field name="age" />
							</group>
							<group>
								<field name="gender" />
								<field name="child" />       
							</group>
						</group>
					</sheet>
				</form>
			</field>
		</record>
		<!-- Action for the Non Abhyasi class-->
		<record model='ir.actions.act_window' id='visitor_nonabhyasi_act'>
			<field name="name">Children and Other Guests </field>
			<field name="res_model">visitor.nonabhyasi</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="help" type="html">
			<p class="oe_view_nocontent_create">
				Click to create a new visitor abhyasi form
			</p><p>
			</p>
			</field>
		</record>


		<!-- Tree view for the visitor_registration class-->
		<record model='ir.ui.view' id='visitor_registration_tree'>
			<field name="name">visitor.registration.tree</field>
			<field name="model">visitor.registration</field>
			<field name="arch" type="xml">
				<tree string="Roles">
					<field name="batchid"  readonly="1" />
					<field name="record_entry" />
					<field name="phonenum" />
					<field name="email" />
					<field name="arrival_date" />
					<field name="arrival_time"  widget="float_time" />
					<field name="departure_date" />
					<field name="departure_time"  widget="float_time" />
							<field name="guest_count" />
							<field name="abhyasi_count" />
							<field name="children_count" />
							<field name="abhyasis" />
							<field name="children" />
				</tree>
			</field>
		</record>
		<record model='ir.ui.view' id='visitor_registration_search'>
			<field name="name">visitor.registration.search</field>
			<field name="model">visitor.registration</field>
			<field name="arch" type="xml">
				<search string="Registrations" >
					<field name="visiting_abhyasis" string="Abhyasi Detail " />
					<field name="batchid" string="Batch Id" />

                                        <filter name="filter_cancelled" domain="[('states', '!=', 'cancelled')]" string="Not Cancelled"/>
                                        <filter name="filter_today" string="Arriving Today" domain="[('fromdate','&lt;=',time.strftime('%Y-%m-%d 23:59:59')),('fromdate','&gt;=',time.strftime('%Y-%m-%d 00:00:00'))]"/>
                                        <filter name="filter_today" string="Departing Today" domain="[('todate','&lt;=',time.strftime('%Y-%m-%d 23:59:59')),('todate','&gt;=',time.strftime('%Y-%m-%d 00:00:00'))]"/>

                                        <group expand="1" string="Group By">
                                            <filter name="groupby_fromdate" context="{'group_by': 'fromdate:day'}" string="Date" />
                                            <filter name="groupby_todate" context="{'group_by': 'todate:day'}" string="Date" />
                                            <filter name="groupby_roomid" context="{'group_by': 'roomid'}" string="Room" />
                                            <filter name="groupby_states" context="{'group_by': 'states'}" string="State" />
                                        </group>
				</search>
			</field>
		</record>
		<record model='ir.ui.view' id='visitor_registration_formcheckin'>
			<field name="name">visitor.registration.formcheckin</field>
			<field name="model">visitor.registration</field>
			<field name="arch" type="xml">
                            <form string="Check-In">
                                <sheet>
                                    <div> <button name="write" type="object" class="oe_highlight" string="Save"/> <button name="cancel" string="Discard" special="cancel" /> </div>
                                    <group>
				    <field name="batchid"  readonly="1" />
                                    </group>
				    <group col="2" string="Check-In">
                                        <group>
                                            <label for="checkin_date" string="Actual Arrival Date"  >
                                            </label>
                                            <div> 
						    <field name="checkin_date" class="oe_inline" required="1"/>
                                                    <label for="checkin_time" string="Time"  />
						    <field name="checkin_time" widget="float_time" class="oe_inline" required="1"/>
                                            </div>
                                        </group>
                                        <group>
                                            <label for="departure_date" string="Planned Deparure Date/Time"  >
                                            </label>
                                            <div >
						    <field name="departure_date" class="oe_inline" required="1"/>
						    <field name="departure_time" widget="float_time" class="oe_inline" required="1"/>
                                            </div>

                                        </group>
                                        <h1>
                                            <label for="roomid" string="Room Allotted"  />
					    <field name="roomid" required="1"/>
                                        </h1>
                                    </group>
					<label for="visiting_abhyasis"/>
					<field name="visiting_abhyasis" />
					<label for="visiting_children"/>
					<field name="visiting_children" />
                                </sheet>
			    </form>
			</field>
		</record>
		<record model='ir.ui.view' id='visitor_registration_formcheckout'>
			<field name="name">visitor.registration.formcheckout</field>
			<field name="model">visitor.registration</field>
			<field name="arch" type="xml">
                            <form string="Check-Out">
                                <sheet>
                                    <div> <button name="write" type="object" class="oe_highlight" string="Save"/> <button name="cancel" string="Discard" special="cancel" /> </div>
				    <group col="2" string="Check-Out">
					<field name="batchid"  readonly="1" />
					<field name="checkout_date" required="1"/>
					<field name="checkout_time"  widget="float_time" required="1"/>
                                    </group>
					<label for="visiting_abhyasis"/>
					<field name="visiting_abhyasis" readonly="1" />
					<label for="visiting_children"/>
					<field name="visiting_children" readonly="1" />
                                </sheet>
			    </form>
			</field>
		</record>
		<record model='ir.ui.view' id='visitor_registration_formcancel'>
			<field name="name">visitor.registration.formcancel</field>
			<field name="model">visitor.registration</field>
			<field name="arch" type="xml">
                            <form string="Cancellation">
                                <sheet>
                                    <div> <button name="write" type="object" class="oe_highlight" string="Save"/> <button name="cancel" string="Discard" special="cancel" /> </div>
				    <group col="2" string="Cancellation">
					<field name="batchid"  readonly="1" />
					<field name="cancellation_date" required="1"/>
                                    </group>
					<label for="visiting_abhyasis"/>
					<field name="visiting_abhyasis" readonly="1" />
					<label for="visiting_children"/>
					<field name="visiting_children" readonly="1" />
                                </sheet>
			    </form>
			</field>
		</record>
		<!-- Form view for the visitor_registration class-->
		<record model='ir.ui.view' id='visitor_registration_form'>
			<field name="name">visitor.registration.form</field>
			<field name="model">visitor.registration</field>
			<field name="arch" type="xml">
				<form string="Registration">
					<!--The header tag is built to add buttons within. This puts them at the top -->
					<header>
                                            <button name="button_checkin" string="Check-In" type="object" attrs="{'invisible': [('states','!=','registered')]}" class="oe_highlight" />
                                            <button name="button_cancel" string="Cancel Registration" type="object" attrs="{'invisible': [('states','!=','registered')]}" />


                                            <button name="button_checkout" string="Check-Out" type="object" attrs="{'invisible': [('states','!=','checkedin')]}" class="oe_highlight" />
                                            <button name="button_uncheckin" string="Undo Check-In" type="object" attrs="{'invisible': [('states','!=','checkedin')]}" confirm="Are you sure you want to undo this check-in?"  />

                                            <button name="button_uncheckout" string="Undo Check-Out" type="object" attrs="{'invisible': [('states','!=','checkedout')]}"   confirm="Are you sure you want to undo this check-out?"  />


					    <field name="states" widget="statusbar" statusbar_visible="new,registered,checkedin,checkedout"/>
					</header>
					<sheet>

						<group>
							<field name="batchid" readonly="1" />
							<field name="record_entry" />
					                <field name="phonenum" />
					                <field name="email" />
							<field name="guest_count" />
							<field name="abhyasi_count" />
							<field name="children_count" />
							<field name="abhyasis" />
							<field name="children" />
                                                </group>
                                                <group col="2">
                                                  <group>
                                                    <label for="arrival_date" string="Planned Arrival Date/Time"  
                                                         attrs="{'invisible': [('states','in',['checkedin', 'checkedout'])]}" >
                                                    </label>
                                                    <div 
                                                         attrs="{'invisible': [('states','in',['checkedin', 'checkedout'])]}" >
							    <field name="arrival_date" class="oe_inline"/>
							    <field name="arrival_time" widget="float_time" class="oe_inline" />
                                                    </div>
                                                    <label for="checkin_date" string="Actual Arrival Date/Time"  
                                                         attrs="{'invisible': [('states','in',['registered', 'cancelled', 'new'])]}" >
                                                    </label>
                                                    <div 
                                                         attrs="{'invisible': [('states','in',['registered', 'cancelled', 'new'])]}" >
							    <field name="checkin_date" class="oe_inline" readonly="1"/>
							    <field name="checkin_time" widget="float_time" class="oe_inline"  readonly="1"/>
                                                    </div>
                                                  </group>
                                                  <group>
                                                    <label for="departure_date" string="Planned Departure Date/Time" 
                                                         attrs="{'invisible': [('states','in',['checkedout'])]}" >
                                                    </label>
                                                    <div 
                                                         attrs="{'invisible': [('states','in',['checkedout'])]}" >
							    <field name="departure_date" class="oe_inline"/>
							    <field name="departure_time" widget="float_time" class="oe_inline" />
                                                    </div>
                                                    <label for="checkout_date" string="Actual Departure Date/Time" 
                                                         attrs="{'invisible': [('states','in',['new', 'cancelled', 'registered', 'checkedin'])]}" >
                                                    </label>
                                                    <div 
                                                         attrs="{'invisible': [('states','in',['new', 'cancelled', 'registered', 'checkedin'])]}" >
							    <field name="checkout_date" class="oe_inline" readonly="1"/>
							    <field name="checkout_time" widget="float_time" class="oe_inline"  readonly="1"/>
                                                    </div>
                                                  </group>
                                                </group>
						<group col="2" string="Room Allotted"
                                                         attrs="{'invisible': [('states','in',['registered', 'cancelled', 'new'])]}" >
							<group>
					                    <field name="roomid" string="Room Allotted" readonly="1"/>
							</group>
						</group>
						<group col="2" string="Cancelled"
                                                         attrs="{'invisible': [('states','in',['registered', 'checkedin', 'checkedout', 'new'])]}" >
							<group>
					                    <field name="cancellation_date" readonly="1"/>
							</group>
						</group>
					<label for="datewise" string="Stay Dates"/>
					<field name="datewise" widget="many2many_tags" />
						<label for="visiting_abhyasis"/>
						<field name="visiting_abhyasis" widget="x2many" />
						<label for="visiting_children"/>
						<field name="visiting_children" />
					</sheet>
				</form>
			</field>
		</record>
		<!-- Action for the visitor_registration class-->
		<record model='ir.actions.act_window' id='visitor_registration_act'>
			<field name="name">Visitor Registration</field>
			<field name="res_model">visitor.registration</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="help" type="html">
			<p class="oe_view_nocontent_create">
				Click to create a new registration for a visitor
			</p><p>
			</p>
			</field>
		</record>  




		<!-- Tree view for the visitor.rooms class-->
		<record model='ir.ui.view' id='visitor_rooms_tree'>
			<field name="name">visitor.rooms.tree</field>
			<field name="model">visitor.rooms</field>
			<field name="arch" type="xml">
				<tree string="Room Details">
					<field name="name" />
					<field name="roomtype" />
					<field name="capacity" />
					<field name="ac" />
					<field name="is_active" />
				</tree>
			</field>
                    </record><!--
		<record model='ir.ui.view' id='visitor_rooms_kanban'>
			<field name="name">visitor.rooms.kanban</field>
			<field name="model">visitor.rooms</field>
			<field name="arch" type="xml">
                            <kanban>
                                <field name="name"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div class="oe_kanban_vignette oe_semantic_html_override">
                                <a type="open" href="#" class="oe_kanban_action">
                                </a>
                                <div class="text-center">
                                    <h1 class="oe_partner_heading">
                                        <a type="open">
                                            <field name="datewiseids"/>
                                        </a>
                                    </h1>
                                </div>
                            </div>
                        </t>
                    </templates>
			    </kanban>
			</field>
                </record> -->
		<!-- Form view for the visitor.rooms class-->
		<record model='ir.ui.view' id='visitor_rooms_form'>
			<field name="name">visitor.rooms.form</field>
			<field name="model">visitor.rooms</field>
			<field name="arch" type="xml">
				<form string="Room Details">
					<sheet>
						<group col="2" string="Room Details">
							<group>
								<field name="name" />
								<field name="roomtype" />
								<field name="capacity" />
							</group>
							<group>
								<field name="ac" />
								<field name="is_active" />
							</group>
						</group>
						<label for="tag_ids" class="oe_edit_only"/>
						<field name="tag_ids" widget="many2many_tags" />
						<label for="notes"/>
						<field name="notes"/>
					</sheet>
				</form>
			</field>
		</record>
		<!-- Action for the visitor_registration class-->
		<record model='ir.actions.act_window' id='visitor_rooms_act'>
			<field name="name">Visitor Rooms</field>
			<field name="res_model">visitor.rooms</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="help" type="html">
			<p class="oe_view_nocontent_create">
				Click to create a new registration for a visitor
			</p><p>
			</p>
			</field>
		</record> 
		
		
		<menuitem name="Visitor" id="visitor_root1" sequence="115"/>
		<menuitem name="Visitor" parent="visitor_root1" id="visitor_root"  sequence="150"/>
		<menuitem action="visitor_registration_act" parent="visitor_root" id="visitor_registration_menu"/>
		<menuitem action="visitor_abhyasi_act" parent="visitor_root" id="visitor_abhyasi_menu"/>
		<menuitem action="visitor_datewise_act" parent="visitor_root" id="visitor_datewise_menu" string="Date-wise Data"/>
		<menuitem action="visitor_datewise_roomwise_act" parent="visitor_root" id="visitor_datewise_roomwise_menu" string="Today Occupancy"/>
		<menuitem action="visitor_datewise_kitchen_act" parent="visitor_root" id="visitor_datewise_kitchen_menu" string="Kitchen Data"/>
		<menuitem name="Configuration" parent="visitor_root" id="visitor_configuration" sequence="200"/>  
		<menuitem action="visitor_rooms_act" parent="visitor_configuration" id="visitor_rooms_menu"/>

	</data>
</openerp>
